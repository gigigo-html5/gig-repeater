<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="gig-repeat-html">
    <template><content></content></template>
    <script>
    Polymer({
        is: 'gig-repeat-html',
        ready: function() {
            this.htmlChanged();
        },
        htmlChanged: function() {
            this.innerHTML = this.html;
        },
        attached: function() {
            this.changeIndex()
        },
        changeIndex: function() {

            if (this.index) {
                var elements = this.querySelectorAll('[name]');

                for (var i = 0; i < elements.length; i++) {
                    var children = elements[i];

                    if (children.name) {
                        this.nameRegex = new RegExp(this.nameRegex);
                        children.name = children.name.replace(this.nameRegex,'$1'+this.index+'$3');
                    }

                    if (children.editor) {
                        children.editorReady();
                    }
                }
            }

        },
        properties: {
            html: {
                type: String,
            },
            index: {
                type: Number,
                reflectToAttribute: true,
                observer: 'changeIndex'
            }
        }
      });
    </script>
</dom-module>
